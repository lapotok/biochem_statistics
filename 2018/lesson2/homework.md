# Домашнее задание №2

_* Обязательные задания_

## 1. Операции с векторами *

В векторе _iris$Petal.Length_ отберите только те наблюдения, которые отклоняются от среднего меньше чем на одно стандартное отклонение. Приведите результат и код, использованный для его получения.

Ниже я привожу псевдокод (условные команды)

```
новая_переменная = iris$Petal.Length
отклонения_от_среднего = модуль(новая_переменная - среднее(новая_переменная))
условие = отклонения_от_среднего < стандартное_отклонение(новая_переменная)
новая_переменная = новая_переменная[условие]
```

## 2. Операции с таблицами данных *

Написать код, чтобы в таблице _iris_ логарифмировать значения колонки _Petal.Length_, применить z-трансформацию к колонке _Petal.Width_, а также создать новую колонку _Sum_, которая будет содержать сумму всех измерений по каждой строке.

Новую колонку можно создать тремя способами:

1. `my_dataframe$new_column_name = c('value1', 'value2'...)`
2. `my_dataframe[['new_column_name']] = c('value1', 'value2'...)`
3. `cbind(my_dataframe, c('value1', 'value2'...))`

Ниже я привожу псевдокод (условные команды)

```
колонка Petal.Length из iris = логарифмирование(колонка Petal.Length из iris)
колонка Petal.Width из iris = z-трансформация(колонка Petal.Width из iris)
результат_суммирования = суммируем все измерения по каждой строке
колонка Sum из iris = результат_суммирования 
```

## 3. Вложенный цикл *

Надо расчитать сумму произведений каждого из чисел от 1 до 100 (включительно) с каждым из чисел от 99 до 999 (включительно). Приведите результат и код, использованный для его получения.

## 4. Использование t-test *

Для решения задачи используем встроенную базу данных _ToothGrowth_. Сравните среднее значение длины зубов свинок, которые потребляли апельсиновый сок (_OJ_) с дозировкой 0.5 миллиграмм, со средним значением длины зубов свинок, которые потребляли аскорбиновую кислоту (_VC_) с дозировкой 2 миллиграмма. Приведите значение `p-value` и код.

## 5. Использование t-test - проверки *

Критерий Стьюдента подходит не для всех типов данных. Сравните виды ириса _I. setosa_ и _I. virginica_ по признаку _Petal.Width_. Сначала проверьте, какой тип теста для сравнения среднего подходит для этих данных и выберите нужный. Приведите значение `p-value` и код.

## 6. Эмпирическая оценка ошибки первого рода t-теста *

Ошибка первого рода в t-тесте -- ошибка найти различие между группами там, где их нет. 

Давайте сгенерируем 1000 раз два набора нормально распределенных случайных выборок по 30 элементов из одной генеральной совокупности (A: mean=60, sd=10; B: mean=60, sd=10). Для каждой пары выборок проведем t-тест. В каком проценте случаев t-тест покажет достоверное различие? 

Ниже я привожу псевдокод (условные команды)

```
вектор_результатов = пустой_вектор()
делаем 1000 повторений (переменная i принимает значения от 1 до 1000)
    # внутри каждого повтора
    А = генератор_выборки(n=30, mean=60, sd=10)
    B = генератор_выборки(n=30, mean=60, sd=10)
    результат = ттест(А, В)
    к вектор_результатов добавляем значение результат
```

**Подсказка 1**: чтобы постепенно добавлять новые элементы в вектор можно сначала создать пустой командой `my_vec=c()`, а потом пополнять командой `my_vec = c(my_vec, new_element)`. 

**Подсказка 2**: команда `sum()` позволяет считать в векторе логических значений число _TRUE_. Приведите результаты и код.

## 7. Эмпирическая оценка ошибки второго рода t-теста *

Ошибка второго рода в t-тесте -- ошибка не найти различие между группами там, где оно есть. 

Давайте сгенерируем 1000 раз два набора нормально распределенных случайных выборок по 30 элементов из разных генеральных совокупностей (A: mean=60, sd=10; B: mean=70, sd=10). Для каждой пары выборок проведем t-test. В каком проценте случаев t-тест не покажет достоверного различия? Приведите результаты и код.

## 8. Разбираемся с незнакомым *

Повторять сказанное на лекции полезно, но не главное! Главное запоминать принцип и учиться гуглить. Поэтому попрошу Вас посчитать среднее для всех признаков всех видов ириса новым способом. Для этого Вам надо использовать функцию `aggregate()`. А чтобы ее использовать сначала Вам надо будет преобразовать таблицу iris в "длинный" формат (группирующая переменная - _Species_) командой `melt()` из пакета `reshape2` (см. пример в конспекте). Приведите результаты и код.

## 9. Пишем сложную функцию (опциально)

Сложное задание! Почувствуйте себя великими оптимизаторами ;) В конспекте последней лекции я написал последовательность команд для построение [сложного графика](https://raw.githubusercontent.com/lapotok/biochem_statistics/master/2018/lesson2/materials_files/figure_html/unnamed-chunk-15-1.png), где на боксплот были наложены точки, разбросы и т.п. Создайте функцию, в которой будут аргументами исходные данные как для боксплота, а в результате работы этой функции должен выдаваться такой же график. Приведите код функции.

## Дополнительные пакеты

Скопируйте себе команды из [данного файла](https://github.com/lapotok/biochem_statistics/blob/master/2018/resources.R) для установки необходимых далее для работы пакетов.
